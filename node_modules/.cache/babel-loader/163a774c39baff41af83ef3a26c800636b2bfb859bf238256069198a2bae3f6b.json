{"ast":null,"code":"/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as poseDetection from '@tensorflow-models/pose-detection';\nimport * as tf from '@tensorflow/tfjs-core';\nconst color = \"aqua\";\nconst boundingBoxColor = \"red\";\nconst lineWidth = 2;\nexport const tryResNetButtonName = \"tryResNetButton\";\nexport const tryResNetButtonText = \"[New] Try ResNet50\";\nconst tryResNetButtonTextCss = \"width:100%;text-decoration:underline;\";\nconst tryResNetButtonBackgroundCss = \"background:#e61d5f;\";\nfunction isAndroid() {\n  return /Android/i.test(navigator.userAgent);\n}\nfunction isiOS() {\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n}\nexport function isMobile() {\n  return isAndroid() || isiOS();\n}\nfunction setDatGuiPropertyCss(propertyText, liCssString) {\n  let spanCssString = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n  var spans = document.getElementsByClassName(\"property-name\");\n  for (var i = 0; i < spans.length; i++) {\n    var text = spans[i].textContent || spans[i].innerText;\n    if (text == propertyText) {\n      spans[i].parentNode.parentNode.style = liCssString;\n      if (spanCssString !== \"\") {\n        spans[i].style = spanCssString;\n      }\n    }\n  }\n}\nexport function updateTryResNetButtonDatGuiCss() {\n  setDatGuiPropertyCss(tryResNetButtonText, tryResNetButtonBackgroundCss, tryResNetButtonTextCss);\n}\n\n/**\n * Toggles between the loading UI and the main canvas UI.\n */\nexport function toggleLoadingUI(showLoadingUI) {\n  let loadingDivId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"loading\";\n  let mainDivId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"main\";\n  if (showLoadingUI) {\n    document.getElementById(loadingDivId).style.display = \"block\";\n    document.getElementById(mainDivId).style.display = \"none\";\n  } else {\n    document.getElementById(loadingDivId).style.display = \"none\";\n    document.getElementById(mainDivId).style.display = \"block\";\n  }\n}\nfunction toTuple(_ref) {\n  let {\n    y,\n    x\n  } = _ref;\n  return [y, x];\n}\nexport function drawPoint(ctx, y, x, r, color) {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\n/**\n * Draws a line on a canvas, i.e. a joint\n */\n\nexport function classify(keypoints) {\n  let tolerance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n  let max_dist = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.05;\n  const facing_right = facing_dir(keypoints);\n  const label = [0, 0, 0, 0, 0, 0, 0]; // straight, legs_apart, legs bend, elbows_bend, sholder_bend, hip_bend, hollowback\n\n  // angles right\n  const angleKneeRight = get_angle(keypoints[16], keypoints[14], keypoints[12], facing_right);\n  const angleHipRight = get_angle(keypoints[14], keypoints[12], keypoints[6], facing_right);\n  const angleSholderRight = get_angle(keypoints[12], keypoints[6], keypoints[8], facing_right);\n  const angleElbowRight = get_angle(keypoints[6], keypoints[8], keypoints[10], facing_right);\n  // angles left\n  const angleKneeLeft = get_angle(keypoints[15], keypoints[13], keypoints[11], facing_right);\n  const angleHipLeft = get_angle(keypoints[13], keypoints[11], keypoints[5], facing_right);\n  const angleSholderLeft = get_angle(keypoints[11], keypoints[5], keypoints[7], facing_right);\n  const angleElbowLeft = get_angle(keypoints[5], keypoints[7], keypoints[9], facing_right);\n  if (angleKneeRight > 180 + tolerance * 2 || angleKneeLeft > 180 + tolerance * 2) {\n    label[2] = 1; //legs_bend\n  } else if (keypoints[15].x - keypoints[16].x > max_dist || keypoints[15].x - keypoints[16].x < -max_dist) {\n    label[1] = 1; //legs_apart\n  } else if (angleElbowRight > 180 + tolerance * 2 || angleElbowLeft > 180 + tolerance * 2) {\n    label[3] = 1; //elbows_bend\n  } else if (angleHipRight > 180 + tolerance / 1.5 || angleHipLeft > 180 + tolerance / 1.5) {\n    label[6] = 1; //hollowback\n  } else if (angleSholderRight > 180 + tolerance || angleSholderLeft > 180 + tolerance) {\n    label[6] = 1; //hollowback  \n  } else if (angleHipRight < 180 - tolerance / 1.75 || angleHipLeft < 180 - tolerance / 1.75) {\n    label[5] = 1; //hip_bend  \n  } else if (angleSholderRight < 170 - tolerance || angleSholderLeft < 170 - tolerance) {\n    label[4] = 1; //shoulder_bend  \n  } else {\n    label[0] = 1; //straight\n  }\n\n  return label;\n}\nexport function facing_dir(keypoints) {\n  //0=chest faces left / 1=chest faces right\n  if (keypoints[0].x < keypoints[1].x || keypoints[0].x < keypoints[2].x) {\n    return 0;\n  } else if (keypoints[0].x > keypoints[1].x || keypoints[0].x > keypoints[2].x) {\n    return 1;\n  }\n}\nexport function get_angle(point_1, point_2, point_3, facing) {\n  let vector_21 = [point_2.x - point_1.x, point_2.y - point_1.y];\n  let vector_23 = [point_2.x - point_3.x, point_2.y - point_3.y];\n  //console.log(vector_21);\n  let cross_product = vector_21[0] * vector_23[1] - vector_21[1] * vector_23[0];\n  let dot_product = vector_21[0] * vector_23[0] + vector_21[1] * vector_23[1];\n  let abs_vector_21 = Math.sqrt(vector_21[0] ** 2 + vector_21[1] ** 2);\n  let abs_vector_23 = Math.sqrt(vector_23[0] ** 2 + vector_23[1] ** 2);\n  let sign = Math.atan2(cross_product, dot_product);\n  let angle = Math.acos(dot_product / (abs_vector_21 * abs_vector_23));\n  angle = angle * 180 / Math.PI;\n  //0=fingers point to the right / 1=fingers point to the left\n  if (facing === 1) {\n    if (sign < 0) {\n      angle = 360 - angle;\n    }\n  } else {\n    if (sign > 0) {\n      angle = 360 - angle;\n    }\n  }\n  return angle;\n}\n\n/**\n * Draws a pose skeleton by looking up all adjacent keypoints/joints\n */\nexport function drawSkeleton(keypoints, minConfidence, ctx) {\n  let scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  const adjacentKeyPoints = poseDetection.util.getAdjacentPairs(poseDetection.SupportedModels.MoveNet);\n  //console.log(keypoints[0].score)\n  adjacentKeyPoints.forEach(_ref2 => {\n    let [i, j] = _ref2;\n    const kp1 = keypoints[i];\n    const kp2 = keypoints[j];\n    const score1 = kp1.score != null ? kp1.score : 1;\n    const score2 = kp2.score != null ? kp2.score : 1;\n    if (score1 >= minConfidence && score2 >= minConfidence) {\n      ctx.beginPath();\n      ctx.moveTo(kp1.x, kp1.y);\n      ctx.lineTo(kp2.x, kp2.y);\n      ctx.strokeStyle = color;\n      ctx.stroke();\n    }\n  });\n}\n\n/**\n * Draw pose keypoints onto a canvas\n */\nexport function drawKeypoints(keypoints, minConfidence, ctx) {\n  let scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  for (let i = 0; i < keypoints.length; i++) {\n    const keypoint = keypoints[i];\n    if (keypoint.score < minConfidence) {\n      continue;\n    }\n    //console.log(keypoint)\n    const {\n      y,\n      x\n    } = keypoint;\n    drawPoint(ctx, y * scale, x * scale, 3, color);\n  }\n}\n\n/**\n * Draw the bounding box of a pose. For example, for a whole person standing\n * in an image, the bounding box will begin at the nose and extend to one of\n * ankles\n */\n\n/**\n * Converts an arary of pixel data into an ImageData object\n */\nexport async function renderToCanvas(a, ctx) {\n  const [height, width] = a.shape;\n  const imageData = new ImageData(width, height);\n  const data = await a.data();\n  for (let i = 0; i < height * width; ++i) {\n    const j = i * 4;\n    const k = i * 3;\n    imageData.data[j + 0] = data[k + 0];\n    imageData.data[j + 1] = data[k + 1];\n    imageData.data[j + 2] = data[k + 2];\n    imageData.data[j + 3] = 255;\n  }\n  ctx.putImageData(imageData, 0, 0);\n}\n\n/**\n * Draw an image on a canvas\n */\nexport function renderImageToCanvas(image, size, canvas) {\n  canvas.width = size[0];\n  canvas.height = size[1];\n  const ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(image, 0, 0);\n}\n\n/**\n * Draw heatmap values, one of the model outputs, on to the canvas\n * Read our blog post for a description of PoseNet's heatmap outputs\n * https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5\n */\nexport function drawHeatMapValues(heatMapValues, outputStride, canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const radius = 5;\n  const scaledValues = heatMapValues.mul(tf.scalar(outputStride, \"int32\"));\n  drawPoints(ctx, scaledValues, radius, color);\n}\n\n/**\n * Used by the drawHeatMapValues method to draw heatmap points on to\n * the canvas\n */\nfunction drawPoints(ctx, points, radius, color) {\n  const data = points.buffer().values;\n  for (let i = 0; i < data.length; i += 2) {\n    const pointY = data[i];\n    const pointX = data[i + 1];\n    if (pointX !== 0 && pointY !== 0) {\n      ctx.beginPath();\n      ctx.arc(pointX, pointY, radius, 0, 2 * Math.PI);\n      ctx.fillStyle = color;\n      ctx.fill();\n    }\n  }\n}\n\n/**\n * Draw offset vector values, one of the model outputs, on to the canvas\n * Read our blog post for a description of PoseNet's offset vector outputs\n * https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5\n */\n// export function drawOffsetVectors(\n//     heatMapValues, offsets, outputStride, scale = 1, ctx) {\n//   const offsetPoints =\n//       posenet.singlePose.getOffsetPoints(heatMapValues, outputStride, offsets);\n\n//   const heatmapData = heatMapValues.buffer().values;\n//   const offsetPointsData = offsetPoints.buffer().values;\n\n//   for (let i = 0; i < heatmapData.length; i += 2) {\n//     const heatmapY = heatmapData[i] * outputStride;\n//     const heatmapX = heatmapData[i + 1] * outputStride;\n//     const offsetPointY = offsetPointsData[i];\n//     const offsetPointX = offsetPointsData[i + 1];\n\n//     drawSegment(\n//         [heatmapY, heatmapX], [offsetPointY, offsetPointX], color, scale, ctx);\n//   }\n// }","map":{"version":3,"names":["poseDetection","tf","color","boundingBoxColor","lineWidth","tryResNetButtonName","tryResNetButtonText","tryResNetButtonTextCss","tryResNetButtonBackgroundCss","isAndroid","test","navigator","userAgent","isiOS","isMobile","setDatGuiPropertyCss","propertyText","liCssString","spanCssString","spans","document","getElementsByClassName","i","length","text","textContent","innerText","parentNode","style","updateTryResNetButtonDatGuiCss","toggleLoadingUI","showLoadingUI","loadingDivId","mainDivId","getElementById","display","toTuple","y","x","drawPoint","ctx","r","beginPath","arc","Math","PI","fillStyle","fill","classify","keypoints","tolerance","max_dist","facing_right","facing_dir","label","angleKneeRight","get_angle","angleHipRight","angleSholderRight","angleElbowRight","angleKneeLeft","angleHipLeft","angleSholderLeft","angleElbowLeft","point_1","point_2","point_3","facing","vector_21","vector_23","cross_product","dot_product","abs_vector_21","sqrt","abs_vector_23","sign","atan2","angle","acos","drawSkeleton","minConfidence","scale","adjacentKeyPoints","util","getAdjacentPairs","SupportedModels","MoveNet","forEach","j","kp1","kp2","score1","score","score2","moveTo","lineTo","strokeStyle","stroke","drawKeypoints","keypoint","renderToCanvas","a","height","width","shape","imageData","ImageData","data","k","putImageData","renderImageToCanvas","image","size","canvas","getContext","drawImage","drawHeatMapValues","heatMapValues","outputStride","radius","scaledValues","mul","scalar","drawPoints","points","buffer","values","pointY","pointX"],"sources":["/Users/davidjaehrling/Desktop/Bachelor/JS-WebApp/from_scratch/src/utilities.js"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as poseDetection from '@tensorflow-models/pose-detection';\nimport * as tf from '@tensorflow/tfjs-core';\n\nconst color = \"aqua\";\nconst boundingBoxColor = \"red\";\nconst lineWidth = 2;\n\nexport const tryResNetButtonName = \"tryResNetButton\";\nexport const tryResNetButtonText = \"[New] Try ResNet50\";\nconst tryResNetButtonTextCss = \"width:100%;text-decoration:underline;\";\nconst tryResNetButtonBackgroundCss = \"background:#e61d5f;\";\n\nfunction isAndroid() {\n  return /Android/i.test(navigator.userAgent);\n}\n\nfunction isiOS() {\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n}\n\nexport function isMobile() {\n  return isAndroid() || isiOS();\n}\n\nfunction setDatGuiPropertyCss(propertyText, liCssString, spanCssString = \"\") {\n  var spans = document.getElementsByClassName(\"property-name\");\n  for (var i = 0; i < spans.length; i++) {\n    var text = spans[i].textContent || spans[i].innerText;\n    if (text == propertyText) {\n      spans[i].parentNode.parentNode.style = liCssString;\n      if (spanCssString !== \"\") {\n        spans[i].style = spanCssString;\n      }\n    }\n  }\n}\n\nexport function updateTryResNetButtonDatGuiCss() {\n  setDatGuiPropertyCss(\n    tryResNetButtonText,\n    tryResNetButtonBackgroundCss,\n    tryResNetButtonTextCss\n  );\n}\n\n/**\n * Toggles between the loading UI and the main canvas UI.\n */\nexport function toggleLoadingUI(\n  showLoadingUI,\n  loadingDivId = \"loading\",\n  mainDivId = \"main\"\n) {\n  if (showLoadingUI) {\n    document.getElementById(loadingDivId).style.display = \"block\";\n    document.getElementById(mainDivId).style.display = \"none\";\n  } else {\n    document.getElementById(loadingDivId).style.display = \"none\";\n    document.getElementById(mainDivId).style.display = \"block\";\n  }\n}\nfunction toTuple({ y, x }) {\n  return [y, x];\n}\n\nexport function drawPoint(ctx, y, x, r, color) {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\n/**\n * Draws a line on a canvas, i.e. a joint\n */\n\n\nexport function classify(keypoints, tolerance = 30, max_dist = 0.05) {\n  const facing_right = facing_dir(keypoints);\n  const label = [0, 0, 0, 0, 0, 0, 0]; // straight, legs_apart, legs bend, elbows_bend, sholder_bend, hip_bend, hollowback\n\n  // angles right\n  const angleKneeRight = get_angle(keypoints[16], keypoints[14], keypoints[12], facing_right);\n  const angleHipRight = get_angle(keypoints[14], keypoints[12], keypoints[6], facing_right);\n  const angleSholderRight = get_angle(keypoints[12], keypoints[6], keypoints[8], facing_right);\n  const angleElbowRight = get_angle(keypoints[6], keypoints[8], keypoints[10], facing_right);\n  // angles left\n  const angleKneeLeft = get_angle(keypoints[15], keypoints[13], keypoints[11], facing_right);\n  const angleHipLeft = get_angle(keypoints[13], keypoints[11], keypoints[5], facing_right);\n  const angleSholderLeft = get_angle(keypoints[11], keypoints[5], keypoints[7], facing_right);\n  const angleElbowLeft = get_angle(keypoints[5], keypoints[7], keypoints[9], facing_right);\n\n  if (angleKneeRight > 180+tolerance*2 || angleKneeLeft > 180+tolerance*2) {\n    label[2] = 1;        //legs_bend\n} else if ((keypoints[15].x-keypoints[16].x) > max_dist || (keypoints[15].x-keypoints[16].x) < -max_dist) {\n    label[1] = 1;        //legs_apart\n} else if (angleElbowRight > 180+tolerance*2 || angleElbowLeft > 180+tolerance*2) {\n    label[3] = 1;        //elbows_bend\n} else if (angleHipRight > 180+tolerance/1.5 || angleHipLeft > 180+tolerance/1.5) {\n    label[6] = 1;        //hollowback\n} else if (angleSholderRight > 180+tolerance || angleSholderLeft > 180+tolerance) {\n    label[6] = 1;        //hollowback  \n} else if (angleHipRight < 180-tolerance/1.75 || angleHipLeft < 180-tolerance/1.75) {\n    label[5] = 1;        //hip_bend  \n} else if (angleSholderRight < 170-tolerance || angleSholderLeft < 170-tolerance) {\n    label[4] = 1;        //shoulder_bend  \n} else {\n    label[0] = 1;        //straight\n}\n  return label;\n  }\n\nexport function facing_dir(keypoints) {\n  //0=chest faces left / 1=chest faces right\n  if (keypoints[0].x < keypoints[1].x || keypoints[0].x < keypoints[2].x) {\n      return 0;\n  } else if (keypoints[0].x > keypoints[1].x || keypoints[0].x > keypoints[2].x) {\n      return 1;\n  }\n}\nexport function get_angle(point_1, point_2, point_3, facing) {\n  \n  let vector_21 = [point_2.x-point_1.x, point_2.y-point_1.y];\n  let vector_23 = [point_2.x-point_3.x, point_2.y-point_3.y];\n  //console.log(vector_21);\n  let cross_product = vector_21[0]*vector_23[1] - vector_21[1]*vector_23[0];\n  let dot_product = vector_21[0]*vector_23[0] + vector_21[1]*vector_23[1];\n  \n  let abs_vector_21 = Math.sqrt(vector_21[0]**2 + vector_21[1]**2);\n  let abs_vector_23 = Math.sqrt(vector_23[0]**2 + vector_23[1]**2);\n  \n  let sign = Math.atan2(cross_product,dot_product);\n  let angle = Math.acos(dot_product/(abs_vector_21*abs_vector_23));\n  angle = angle * 180 / Math.PI;\n  //0=fingers point to the right / 1=fingers point to the left\n  if (facing === 1) {\n      if (sign < 0) {\n          angle = 360-angle;\n      }\n  } else {\n      if (sign > 0) {\n          angle = 360-angle;\n      }\n  }\n  return angle;\n}\n\n\n/**\n * Draws a pose skeleton by looking up all adjacent keypoints/joints\n */\nexport function drawSkeleton(keypoints, minConfidence, ctx, scale = 1) {\n\n  const adjacentKeyPoints = poseDetection.util.getAdjacentPairs(poseDetection.SupportedModels.MoveNet);\n  //console.log(keypoints[0].score)\n  adjacentKeyPoints.forEach(([i, j]) => {\n\n    const kp1 = keypoints[i];\n    const kp2 = keypoints[j]; \n    \n\n    const score1 = kp1.score != null ? kp1.score : 1;\n    const score2 = kp2.score != null ? kp2.score : 1;\n\n    if (score1 >= minConfidence && score2 >= minConfidence) {\n      ctx.beginPath();\n      ctx.moveTo(kp1.x, kp1.y);\n      ctx.lineTo(kp2.x, kp2.y);\n      ctx.strokeStyle = color;\n      ctx.stroke();\n      }});\n}\n\n/**\n * Draw pose keypoints onto a canvas\n */\nexport function drawKeypoints(keypoints, minConfidence, ctx, scale = 1) {\n  \n  for (let i = 0; i < keypoints.length; i++) {\n    const keypoint = keypoints[i];\n\n    if (keypoint.score < minConfidence) {\n      continue;\n    }\n    //console.log(keypoint)\n    const { y, x } = keypoint;\n\n\n    drawPoint(ctx, y * scale, x * scale, 3, color);\n  }\n}\n\n/**\n * Draw the bounding box of a pose. For example, for a whole person standing\n * in an image, the bounding box will begin at the nose and extend to one of\n * ankles\n */\n\n\n/**\n * Converts an arary of pixel data into an ImageData object\n */\nexport async function renderToCanvas(a, ctx) {\n  const [height, width] = a.shape;\n  const imageData = new ImageData(width, height);\n\n  const data = await a.data();\n\n  for (let i = 0; i < height * width; ++i) {\n    const j = i * 4;\n    const k = i * 3;\n\n    imageData.data[j + 0] = data[k + 0];\n    imageData.data[j + 1] = data[k + 1];\n    imageData.data[j + 2] = data[k + 2];\n    imageData.data[j + 3] = 255;\n  }\n\n  ctx.putImageData(imageData, 0, 0);\n}\n\n/**\n * Draw an image on a canvas\n */\nexport function renderImageToCanvas(image, size, canvas) {\n  canvas.width = size[0];\n  canvas.height = size[1];\n  const ctx = canvas.getContext(\"2d\");\n\n  ctx.drawImage(image, 0, 0);\n}\n\n/**\n * Draw heatmap values, one of the model outputs, on to the canvas\n * Read our blog post for a description of PoseNet's heatmap outputs\n * https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5\n */\nexport function drawHeatMapValues(heatMapValues, outputStride, canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const radius = 5;\n  const scaledValues = heatMapValues.mul(tf.scalar(outputStride, \"int32\"));\n\n  drawPoints(ctx, scaledValues, radius, color);\n}\n\n/**\n * Used by the drawHeatMapValues method to draw heatmap points on to\n * the canvas\n */\nfunction drawPoints(ctx, points, radius, color) {\n  const data = points.buffer().values;\n\n  for (let i = 0; i < data.length; i += 2) {\n    const pointY = data[i];\n    const pointX = data[i + 1];\n\n    if (pointX !== 0 && pointY !== 0) {\n      ctx.beginPath();\n      ctx.arc(pointX, pointY, radius, 0, 2 * Math.PI);\n      ctx.fillStyle = color;\n      ctx.fill();\n    }\n  }\n}\n\n/**\n * Draw offset vector values, one of the model outputs, on to the canvas\n * Read our blog post for a description of PoseNet's offset vector outputs\n * https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5\n */\n// export function drawOffsetVectors(\n//     heatMapValues, offsets, outputStride, scale = 1, ctx) {\n//   const offsetPoints =\n//       posenet.singlePose.getOffsetPoints(heatMapValues, outputStride, offsets);\n\n//   const heatmapData = heatMapValues.buffer().values;\n//   const offsetPointsData = offsetPoints.buffer().values;\n\n//   for (let i = 0; i < heatmapData.length; i += 2) {\n//     const heatmapY = heatmapData[i] * outputStride;\n//     const heatmapX = heatmapData[i + 1] * outputStride;\n//     const offsetPointY = offsetPointsData[i];\n//     const offsetPointX = offsetPointsData[i + 1];\n\n//     drawSegment(\n//         [heatmapY, heatmapX], [offsetPointY, offsetPointX], color, scale, ctx);\n//   }\n// }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}